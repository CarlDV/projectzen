<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Body body body!</title>
  <meta property="og:title" content="David's Portfolio">
  <meta property="og:description" content="nwjaveawhvejawveuawvheawv">
  <meta property="og:image" content="https://files.catbox.moe/mww2q5.gif">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://apocrypha.pages.dev">
  <meta property="og:type" content="website">
  <link rel="stylesheet" href="style2.css">
</head>

<body>
  <div id="welcome-overlay">
    <div class="welcome-content">
      <h1>Welcome!</h1>
      <button id="enter-button">Click Me!</button>
    </div>
  </div>

  <div id="lyrics-container"></div>

  <div class="box">
    <h1 style="color: antiquewhite;">Helloooo!!!</h1>
    <img src="zen2.gif" width="200" height="200" class="sol" title="Ayato Yuri from yarichin b club!!!">
    <p>I'm David :) <br> I do .html, .css, .java, and .py</p>
    <div class="socials">
      <a href="https://discord.com/users/852629822727651399" target="_blank">
        <img src="dis.png" alt="Discord" title="Discord">
      </a>
      <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank">
        <img src="spot.png" alt="Spotify" title="Spotify">
      </a>
      <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ" target="_blank" title="GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="github-icon">
          <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
        </svg>
      </a>
    </div>
  </div>
  <audio id="welcome-audio" src="umi.mp3" preload="auto" loop></audio>
  <script>
    const overlay = document.getElementById('welcome-overlay');
    const enterButton = document.getElementById('enter-button');
    const audio = document.getElementById('welcome-audio');
    const lyricsContainer = document.getElementById('lyrics-container');
    let lyrics = [];

    // negative is slow positive is fast change later if broken 
    const LYRIC_OFFSET = 0;

    fetch('umi.lrc')
      .then(response => response.text())
      .then(text => {
        lyrics = parseLRC(text);
      })
      .catch(error => console.error('Error fetching or parsing lyrics:', error));

    function parseLRC(lrcContent) {
      const lines = lrcContent.split('\n');
      const parsedLyrics = [];
      const timeRegex = /\[(\d{2}):(\d{2})\.(\d{2,3})\]/;

      for (const line of lines) {
        const match = line.match(timeRegex);
        if (match) {
          const minutes = parseInt(match[1], 10);
          const seconds = parseInt(match[2], 10);
          const milliseconds = parseInt(match[3], 10);
          const totalMilliseconds = match[3].length === 2 ? milliseconds * 10 : milliseconds;
          const time = minutes * 60 + seconds + totalMilliseconds / 1000;
          const text = line.replace(timeRegex, '').trim();
          if (text || text === '') {
            parsedLyrics.push({ time, text });
          }
        }
      }
      return parsedLyrics;
    }

    enterButton.addEventListener('click', () => {
      audio.play().catch(error => console.error("Audio playback failed:", error));
      overlay.classList.add('hidden');
    });
    audio.addEventListener('timeupdate', () => {
      const currentTime = audio.currentTime + LYRIC_OFFSET;
      const currentLyric = lyrics.find((lyric, index) => {
        const nextLyric = lyrics[index + 1];
        return currentTime >= lyric.time && (!nextLyric || currentTime < nextLyric.time);
      });

      if (currentLyric) {
        lyricsContainer.textContent = currentLyric.text;
      } else {
        const firstLyricTime = lyrics.length > 0 ? lyrics[0].time : -1;
        if (currentTime < firstLyricTime) {
            lyricsContainer.textContent = '';
        }
      }
    });
  </script>
</body>
</html>